export default {
  async fetch(request) {
    const url = new URL(request.url);

    const BIN_ID = "6834247e8561e97a501b9af2"; // tvůj bin
    const API_KEY = "$2a$10$9AWOPjDcqkeAt3vEbNRv6uJGiOHuzf0YdWooGJrLcKxV1f.5NJqbO";         // NEZVEŘEJŇUJ NIKDY DO FRONTENDU
    const BIN_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;

    if (request.method === "GET") {
      const response = await fetch(BIN_URL, {
        headers: { "X-Master-Key": API_KEY }
      });
      return response;
    }

    if (request.method === "PUT") {
      const body = await request.text();
      const response = await fetch(BIN_URL, {
        method: "PUT",
        headers: {
          "Content-Type": "application/json",
          "X-Master-Key": API_KEY
        },
        body
      });
      return response;
    }

    return new Response("Method not allowed", { status: 405 });
  }
}
